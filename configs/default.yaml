# pm-mem 默认配置文件
# 此文件包含所有可配置参数及其默认值
# 用户可以通过创建 configs/local.yaml 来覆盖这些配置

# LLM配置
llm:
  provider: "deepseek"  # deepseek | mock
  model_name: "deepseek-chat"
  max_tokens: 2048
  temperature: 0.7
  timeout: 30
  max_retries: 3

  # DeepSeek特定配置（通过环境变量覆盖）
  deepseek:
    api_key: ""  # 从环境变量 DEEPSEEK_API_KEY 读取
    api_base: "https://api.deepseek.com"

# 记忆库配置
memory:
  max_entries: 1000
  persistence_path: "./data/memory.json"
  backup_dir: "./backups"
  prune_ratio: 0.2  # 清理比例20%

# ReMem Agent配置
agent:
  max_iterations: 8
  retrieval_k: 5  # 检索返回的最相关记忆数量
  enable_persistence: true
  auto_save: true
  save_interval: 10  # 每10个任务自动保存一次

# 提示词配置
prompts:
  system_version: "1.0.0"
  templates_path: "./configs/prompt_templates.json"  # 提示词模板文件

# 日志配置
logging:
  level: "INFO"  # DEBUG | INFO | WARNING | ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file_path: "./logs/pm-mem.log"
  max_file_size: 10485760  # 10MB
  backup_count: 5

# 性能监控
monitoring:
  enable: false
  collect_metrics: true
  metrics_path: "./data/metrics.json"
  report_interval: 60  # 秒

# 测试配置
testing:
  use_mock_llm: true
  test_data_path: "./tests/data"
  coverage_target: 0.85

# 高级配置（通常不需要修改）
advanced:
  # 记忆检索配置
  retrieval:
    similarity_threshold: 0.7
    use_caching: true
    cache_size: 100

  # 状态机配置
  state_machine:
    strict_mode: true
    validation_level: "strict"  # strict | moderate | lenient

  # 持久化配置
  persistence:
    auto_backup: true
    backup_count: 3
    compression: false

# 环境特定配置（通过环境变量 PM_MEM_ENV 设置）
environments:
  development:
    llm:
      provider: "mock"  # 开发环境使用模拟LLM
    logging:
      level: "DEBUG"
    monitoring:
      enable: true

  testing:
    llm:
      provider: "mock"
    logging:
      level: "INFO"
      file_path: "./logs/pm-mem-test.log"
    memory:
      persistence_path: "./data/memory-test.json"

  production:
    llm:
      provider: "deepseek"
    logging:
      level: "WARNING"
    monitoring:
      enable: true
    advanced:
      persistence:
        auto_backup: true
        backup_count: 10